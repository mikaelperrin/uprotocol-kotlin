/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    alias(libs.plugins.kotlin.jvm)
    alias(libs.plugins.protobuf)
    id 'maven-publish'
}

apply from: './gradle/config.gradle'

dependencies {
    implementation libs.io.cloudevents.cloudevents.protobuf
    implementation libs.io.cloudevents.cloudevents.core
    implementation libs.io.cloudevents.cloudevents.api
    implementation libs.io.cloudevents.cloudevents.json.jackson
    implementation libs.com.google.protobuf.protobuf.kotlin
    implementation libs.org.jetbrains.kotlinx.kotlinx.coroutines.core
    implementation libs.com.github.f4b6a3.uuid.creator
    implementation libs.commons.validator.commons.validator
    protobuf libs.com.github.uprotocol.core.api
    testImplementation libs.org.jetbrains.kotlinx.kotlinx.coroutines.test
    testImplementation libs.nl.jqno.equalsverifier.equalsverifier
    testImplementation libs.org.junit.jupiter.junit.jupiter.engine
    testImplementation libs.org.json.json
    testImplementation libs.org.jetbrains.kotlin.kotlin.test
}

protobuf {
    protoc {
        artifact = libs.com.google.protobuf.protoc.get()
    }
    plugins {}
    generateProtoTasks {
        all().each {task ->
            task.builtins {
                kotlin {}
            }
        }
    }
}

kotlin.jvmToolchain(17)
test {
    useJUnitPlatform()
}

afterEvaluate {
    publishing {
        publications {
            maven(MavenPublication) {
                groupId = config.group
                artifactId = config.artifact
                version = config.version
                from(components.kotlin)
            }
        }
    }
}